{"ast":null,"code":"import _regeneratorRuntime from\"/home/thangnq/Code/netflix_mern/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/thangnq/Code/netflix_mern/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/thangnq/Code/netflix_mern/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{getDataAPI}from\"../../utils/fetchData\";import RecommendItem from\"../recommend-item/RecommendItem\";import\"./recommend.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Recommend=function Recommend(_ref){var movieCurrent=_ref.movieCurrent;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),recommendList=_useState2[0],setRecommendList=_useState2[1];useEffect(function(){var getRecommend=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,recommend,filterRecommend,i,j,_ref3;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getDataAPI(\"lists/recommend/\".concat(movieCurrent._id));case 3:res=_context.sent;recommend=res.data[0].result;filterRecommend=recommend.filter(function(e){return e._id!==movieCurrent._id;}).slice(0,9);// suffle array\nfor(i=filterRecommend.length-1;i>0;i--){j=Math.floor(Math.random()*(i+1));_ref3=[filterRecommend[j],filterRecommend[i]];filterRecommend[i]=_ref3[0];filterRecommend[j]=_ref3[1];}setRecommendList(filterRecommend);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function getRecommend(){return _ref2.apply(this,arguments);};}();getRecommend();},[movieCurrent._id]);return/*#__PURE__*/_jsxs(\"div\",{className:\"menu-similar\",children:[!movieCurrent.isSeries&&/*#__PURE__*/_jsx(\"div\",{className:\"breaker\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"More Like This\"}),/*#__PURE__*/_jsx(\"div\",{className:\"menu-similar-content\",children:recommendList.map(function(e,index){return/*#__PURE__*/_jsx(RecommendItem,{movie:e},index);})})]});};export default Recommend;","map":{"version":3,"sources":["/home/thangnq/Code/netflix_mern/frontend/src/components/recommend/Recommend.js"],"names":["React","useEffect","useState","getDataAPI","RecommendItem","Recommend","movieCurrent","recommendList","setRecommendList","getRecommend","_id","res","recommend","data","result","filterRecommend","filter","e","slice","i","length","j","Math","floor","random","console","log","isSeries","map","index"],"mappings":"0dAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,UAAT,KAA2B,uBAA3B,CACA,MAAOC,CAAAA,aAAP,KAA0B,iCAA1B,CACA,MAAO,kBAAP,C,wFAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,MAAsB,IAAnBC,CAAAA,YAAmB,MAAnBA,YAAmB,CACtC,cAA0CJ,QAAQ,CAAC,EAAD,CAAlD,wCAAOK,aAAP,eAAsBC,gBAAtB,eAEAP,SAAS,CAAC,UAAM,CACd,GAAMQ,CAAAA,YAAY,2FAAG,qNAECN,CAAAA,UAAU,2BAAoBG,YAAY,CAACI,GAAjC,EAFX,QAEXC,GAFW,eAIXC,SAJW,CAICD,GAAG,CAACE,IAAJ,CAAS,CAAT,EAAYC,MAJb,CAMXC,eANW,CAMOH,SAAS,CAC9BI,MADqB,CACd,SAACC,CAAD,QAAOA,CAAAA,CAAC,CAACP,GAAF,GAAUJ,YAAY,CAACI,GAA9B,EADc,EAErBQ,KAFqB,CAEf,CAFe,CAEZ,CAFY,CANP,CAUjB;AACA,IAASC,CAAT,CAAaJ,eAAe,CAACK,MAAhB,CAAyB,CAAtC,CAAyCD,CAAC,CAAG,CAA7C,CAAgDA,CAAC,EAAjD,CAAqD,CAC7CE,CAD6C,CACzCC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,IAAiBL,CAAC,CAAG,CAArB,CAAX,CADyC,OAER,CACzCJ,eAAe,CAACM,CAAD,CAD0B,CAEzCN,eAAe,CAACI,CAAD,CAF0B,CAFQ,CAElDJ,eAAe,CAACI,CAAD,CAFmC,UAE9BJ,eAAe,CAACM,CAAD,CAFe,UAMpD,CAEDb,gBAAgB,CAACO,eAAD,CAAhB,CAnBiB,iFAqBjBU,OAAO,CAACC,GAAR,cArBiB,qEAAH,kBAAZjB,CAAAA,YAAY,2CAAlB,CAwBAA,YAAY,GACb,CA1BQ,CA0BN,CAACH,YAAY,CAACI,GAAd,CA1BM,CAAT,CA4BA,mBACE,aAAK,SAAS,CAAC,cAAf,WACG,CAACJ,YAAY,CAACqB,QAAd,eAA0B,YAAK,SAAS,CAAC,SAAf,EAD7B,cAEE,sCAFF,cAGE,YAAK,SAAS,CAAC,sBAAf,UACGpB,aAAa,CAACqB,GAAd,CAAkB,SAACX,CAAD,CAAIY,KAAJ,qBACjB,KAAC,aAAD,EAA2B,KAAK,CAAEZ,CAAlC,EAAoBY,KAApB,CADiB,EAAlB,CADH,EAHF,GADF,CAWD,CA1CD,CA4CA,cAAexB,CAAAA,SAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { getDataAPI } from \"../../utils/fetchData\";\nimport RecommendItem from \"../recommend-item/RecommendItem\";\nimport \"./recommend.scss\";\n\nconst Recommend = ({ movieCurrent }) => {\n  const [recommendList, setRecommendList] = useState([]);\n\n  useEffect(() => {\n    const getRecommend = async () => {\n      try {\n        const res = await getDataAPI(`lists/recommend/${movieCurrent._id}`);\n\n        const recommend = res.data[0].result;\n\n        const filterRecommend = recommend\n          .filter((e) => e._id !== movieCurrent._id)\n          .slice(0, 9);\n\n        // suffle array\n        for (let i = filterRecommend.length - 1; i > 0; i--) {\n          const j = Math.floor(Math.random() * (i + 1));\n          [filterRecommend[i], filterRecommend[j]] = [\n            filterRecommend[j],\n            filterRecommend[i],\n          ];\n        }\n\n        setRecommendList(filterRecommend);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n    getRecommend();\n  }, [movieCurrent._id]);\n\n  return (\n    <div className=\"menu-similar\">\n      {!movieCurrent.isSeries && <div className=\"breaker\"></div>}\n      <h2>More Like This</h2>\n      <div className=\"menu-similar-content\">\n        {recommendList.map((e, index) => (\n          <RecommendItem key={index} movie={e} />\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default Recommend;\n"]},"metadata":{},"sourceType":"module"}