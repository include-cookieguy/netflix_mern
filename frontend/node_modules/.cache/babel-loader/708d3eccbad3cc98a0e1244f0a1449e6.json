{"ast":null,"code":"import _regeneratorRuntime from\"/home/thangnq/Code/netflix_mern/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/thangnq/Code/netflix_mern/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/thangnq/Code/netflix_mern/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/home/thangnq/Code/netflix_mern/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useState,useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";var useSlider=function useSlider(elementWidth,containerRef,countElements,data,poster){var mapDataToContent=function mapDataToContent(){return data.map(function(e){return _objectSpread(_objectSpread({},e),{},{id:e._id,transform:\"0px\",origin:\"center center\"});});};var _useState=useState(0),_useState2=_slicedToArray(_useState,2),viewed=_useState2[0],setViewed=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),distance=_useState4[0],setDistance=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),containerWidth=_useState6[0],setContainerWidth=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),totalInViewport=_useState8[0],setTotalInViewport=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),slider=_useState10[0],setSlider=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),currentSlide=_useState12[0],setCurrentSlide=_useState12[1];var _useState13=useState(mapDataToContent),_useState14=_slicedToArray(_useState13,2),content=_useState14[0],setContent=_useState14[1];var _useState15=useState(0),_useState16=_slicedToArray(_useState15,2),sliderIndex=_useState16[0],setSliderIndex=_useState16[1];var _useState17=useState(0),_useState18=_slicedToArray(_useState17,2),sliderPages=_useState18[0],setSliderPages=_useState18[1];var hasPrev=distance<0;var hasNext=viewed+totalInViewport<countElements;useEffect(function(){var mapDataToContent=function mapDataToContent(){return data.map(function(e){return _objectSpread(_objectSpread({},e),{},{id:e._id,transform:\"0px\",origin:\"center center\"});});};setContent(mapDataToContent);},[data]);useEffect(function(){if(containerRef.current.firstChild&&data){var _containerWidth=containerRef.current.clientWidth;var itemWidth=containerRef.current.firstChild.clientWidth;var _totalInViewport=Math.ceil(_containerWidth/itemWidth);setSlider(containerRef.current.children);setContainerWidth(_containerWidth);setTotalInViewport(_totalInViewport);setSliderPages(countElements/_totalInViewport);}},[containerRef,data,countElements,elementWidth,content]);var slideProps={style:{transform:\"translate3d(\".concat(distance,\"px, 0, 0)\")}};var transformProps={edge:{left:poster?\"-5%\":\"-35%\",right:poster?\"5%\":\"35%\"},normal:{left:poster?\"-10%\":\"-70%\",right:poster?\"10%\":\"70%\"}};var paginationIndicator=function paginationIndicator(nPages){var paginationList=[];for(var i=0;i<nPages;i++){if(sliderIndex===i){paginationList.push(/*#__PURE__*/_jsx(\"li\",{className:\"active\"},i));}else{paginationList.push(/*#__PURE__*/_jsx(\"li\",{},i));}}return paginationList;};var moveSection=function moveSection(type){if(type===\"right\"){setViewed(viewed+totalInViewport);setDistance(distance-containerWidth);setSliderIndex(function(prevState){return prevState+1;});}else if(type===\"left\"){setViewed(viewed-totalInViewport);setDistance(distance+containerWidth);setSliderIndex(function(prevState){return prevState-1;});}else if(type===\"reset\"){setViewed(0);setDistance(0);setSliderIndex(0);}if(currentSlide){var elementsWithClass=Object.entries(slider).filter(function(item){if(item[1].className.includes(\"onScreen\"))return true;return false;});var selectedItem=null;var selectedItemIndex=null;if(type===\"right\"){elementsWithClass=elementsWithClass.slice(-1)[0];elementsWithClass=elementsWithClass[1].dataset.id;selectedItem=content.filter(function(item,index){if(item.id===parseInt(elementsWithClass)){selectedItemIndex=index;return true;}return false;})[0];selectedItem=content[selectedItemIndex+1];}else if(type===\"left\"){elementsWithClass=elementsWithClass[0];elementsWithClass=elementsWithClass[1].dataset.id;selectedItem=content.filter(function(item,index){if(item.id===parseInt(elementsWithClass)){selectedItemIndex=index;return true;}return false;})[0];selectedItem=content[selectedItemIndex-1];}else if(type===\"reset\"){selectedItem=content[0];}setCurrentSlide(selectedItem);}};var selectSlide=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var selected;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:selected=content.filter(function(item){return item.id===id;})[0];setCurrentSlide(selected);case 2:case\"end\":return _context.stop();}}},_callee);}));return function selectSlide(_x){return _ref.apply(this,arguments);};}();var closeInformationWindow=function closeInformationWindow(){setCurrentSlide(null);};var scaleTiles=function scaleTiles(e){e.preventDefault();if(currentSlide)return;if(!slider)return;var slideItemIndex=Object.entries(slider).findIndex(function(item){return item[1]===e.currentTarget;});var itemId=slider[slideItemIndex].dataset.id;var hoveredSlide=content.filter(function(item){return item.id===itemId;})[0];var nextItem=isOnScreen(slider[slideItemIndex+1]);var prevItem=isOnScreen(slider[slideItemIndex-1]);//EDGE CASE : CHECK IF FIRST LEFT OR LAST RIGHT ELEMENT\nif(prevItem&&nextItem){setContent(function(prevState){var newState=prevState.map(function(item,index){item.origin=\"center center\";if(hoveredSlide.id!==item.id&&index>slideItemIndex){item.transform=transformProps.edge.right;return item;}else if(hoveredSlide.id!==item.id&&index<slideItemIndex){item.transform=transformProps.edge.left;return item;}else{item.transform=\"0px\";return item;}});return newState;});}else if(!prevItem){setContent(function(prevState){var newState=prevState.map(function(item,index){if(hoveredSlide.id!==item.id&&index>slideItemIndex){item.transform=transformProps.normal.right;item.origin=\"center center\";return item;}else{item.transform=\"0px\";item.origin=\"left center\";return item;}});return newState;});}else if(!nextItem){setContent(function(prevState){var newState=prevState.map(function(item,index){if(hoveredSlide.id!==item.id&&index<slideItemIndex){item.transform=transformProps.normal.left;item.origin=\"center center\";return item;}else{item.transform=\"0px\";item.origin=\"center right \";return item;}});return newState;});}};var isOnScreen=function isOnScreen(slide){if(slide&&slide.className.split(\" \").includes(\"onScreen\")){return true;}return false;};var resetSize=function resetSize(e){setContent(function(prevState){var newState=prevState.map(function(item,index){item.transform=\"0px\";return item;});return newState;});};return{moveSection:moveSection,selectSlide:selectSlide,closeInformationWindow:closeInformationWindow,hasPrev:hasPrev,hasNext:hasNext,scaleTiles:scaleTiles,resetSize:resetSize,sliderIndex:sliderIndex,sliderPages:sliderPages,slideProps:slideProps,content:content,currentSlide:currentSlide,paginationIndicator:paginationIndicator};};export default useSlider;","map":{"version":3,"sources":["/home/thangnq/Code/netflix_mern/frontend/src/hooks/useSlider.js"],"names":["React","useState","useEffect","useSlider","elementWidth","containerRef","countElements","data","poster","mapDataToContent","map","e","id","_id","transform","origin","viewed","setViewed","distance","setDistance","containerWidth","setContainerWidth","totalInViewport","setTotalInViewport","slider","setSlider","currentSlide","setCurrentSlide","content","setContent","sliderIndex","setSliderIndex","sliderPages","setSliderPages","hasPrev","hasNext","current","firstChild","clientWidth","itemWidth","Math","ceil","children","slideProps","style","transformProps","edge","left","right","normal","paginationIndicator","nPages","paginationList","i","push","moveSection","type","prevState","elementsWithClass","Object","entries","filter","item","className","includes","selectedItem","selectedItemIndex","slice","dataset","index","parseInt","selectSlide","selected","closeInformationWindow","scaleTiles","preventDefault","slideItemIndex","findIndex","currentTarget","itemId","hoveredSlide","nextItem","isOnScreen","prevItem","newState","slide","split","resetSize"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nconst useSlider = (elementWidth, containerRef, countElements, data, poster) => {\n  const mapDataToContent = () => {\n    return data.map((e) => ({\n      ...e,\n      id: e._id,\n      transform: \"0px\",\n      origin: \"center center\",\n    }));\n  };\n\n  const [viewed, setViewed] = useState(0);\n  const [distance, setDistance] = useState(0);\n  const [containerWidth, setContainerWidth] = useState(0);\n  const [totalInViewport, setTotalInViewport] = useState(0);\n  const [slider, setSlider] = useState(null);\n  const [currentSlide, setCurrentSlide] = useState(null);\n  const [content, setContent] = useState(mapDataToContent);\n  const [sliderIndex, setSliderIndex] = useState(0);\n  const [sliderPages, setSliderPages] = useState(0);\n  const hasPrev = distance < 0;\n  const hasNext = viewed + totalInViewport < countElements;\n\n  useEffect(() => {\n    const mapDataToContent = () => {\n      return data.map((e) => ({\n        ...e,\n        id: e._id,\n        transform: \"0px\",\n        origin: \"center center\",\n      }));\n    };\n    setContent(mapDataToContent);\n  }, [data]);\n\n  useEffect(() => {\n    if (containerRef.current.firstChild && data) {\n      const containerWidth = containerRef.current.clientWidth;\n      const itemWidth = containerRef.current.firstChild.clientWidth;\n      const totalInViewport = Math.ceil(containerWidth / itemWidth);\n\n      setSlider(containerRef.current.children);\n      setContainerWidth(containerWidth);\n      setTotalInViewport(totalInViewport);\n      setSliderPages(countElements / totalInViewport);\n    }\n  }, [containerRef, data, countElements, elementWidth, content]);\n\n  let slideProps = {\n    style: { transform: `translate3d(${distance}px, 0, 0)` },\n  };\n\n  let transformProps = {\n    edge: {\n      left: poster ? \"-5%\" : \"-35%\",\n      right: poster ? \"5%\" : \"35%\",\n    },\n    normal: {\n      left: poster ? \"-10%\" : \"-70%\",\n      right: poster ? \"10%\" : \"70%\",\n    },\n  };\n\n  const paginationIndicator = (nPages) => {\n    let paginationList = [];\n\n    for (let i = 0; i < nPages; i++) {\n      if (sliderIndex === i) {\n        paginationList.push(<li className=\"active\" key={i}></li>);\n      } else {\n        paginationList.push(<li key={i}></li>);\n      }\n    }\n\n    return paginationList;\n  };\n\n  const moveSection = (type) => {\n    if (type === \"right\") {\n      setViewed(viewed + totalInViewport);\n      setDistance(distance - containerWidth);\n      setSliderIndex((prevState) => prevState + 1);\n    } else if (type === \"left\") {\n      setViewed(viewed - totalInViewport);\n      setDistance(distance + containerWidth);\n      setSliderIndex((prevState) => prevState - 1);\n    } else if (type === \"reset\") {\n      setViewed(0);\n      setDistance(0);\n      setSliderIndex(0);\n    }\n\n    if (currentSlide) {\n      let elementsWithClass = Object.entries(slider).filter((item) => {\n        if (item[1].className.includes(\"onScreen\")) return true;\n        return false;\n      });\n\n      let selectedItem = null;\n      let selectedItemIndex = null;\n\n      if (type === \"right\") {\n        elementsWithClass = elementsWithClass.slice(-1)[0];\n        elementsWithClass = elementsWithClass[1].dataset.id;\n\n        selectedItem = content.filter((item, index) => {\n          if (item.id === parseInt(elementsWithClass)) {\n            selectedItemIndex = index;\n            return true;\n          }\n          return false;\n        })[0];\n\n        selectedItem = content[selectedItemIndex + 1];\n      } else if (type === \"left\") {\n        elementsWithClass = elementsWithClass[0];\n        elementsWithClass = elementsWithClass[1].dataset.id;\n\n        selectedItem = content.filter((item, index) => {\n          if (item.id === parseInt(elementsWithClass)) {\n            selectedItemIndex = index;\n            return true;\n          }\n          return false;\n        })[0];\n\n        selectedItem = content[selectedItemIndex - 1];\n      } else if (type === \"reset\") {\n        selectedItem = content[0];\n      }\n\n      setCurrentSlide(selectedItem);\n    }\n  };\n\n  const selectSlide = async (id) => {\n    const selected = content.filter((item) => item.id === id)[0];\n    setCurrentSlide(selected);\n  };\n\n  const closeInformationWindow = () => {\n    setCurrentSlide(null);\n  };\n\n  const scaleTiles = (e) => {\n    e.preventDefault();\n\n    if (currentSlide) return;\n\n    if (!slider) return;\n\n    const slideItemIndex = Object.entries(slider).findIndex(\n      (item) => item[1] === e.currentTarget\n    );\n\n    const itemId = slider[slideItemIndex].dataset.id;\n\n    const hoveredSlide = content.filter((item) => item.id === itemId)[0];\n\n    let nextItem = isOnScreen(slider[slideItemIndex + 1]);\n    let prevItem = isOnScreen(slider[slideItemIndex - 1]);\n\n    //EDGE CASE : CHECK IF FIRST LEFT OR LAST RIGHT ELEMENT\n\n    if (prevItem && nextItem) {\n      setContent((prevState) => {\n        let newState = prevState.map((item, index) => {\n          item.origin = \"center center\";\n\n          if (hoveredSlide.id !== item.id && index > slideItemIndex) {\n            item.transform = transformProps.edge.right;\n\n            return item;\n          } else if (hoveredSlide.id !== item.id && index < slideItemIndex) {\n            item.transform = transformProps.edge.left;\n            return item;\n          } else {\n            item.transform = \"0px\";\n            return item;\n          }\n        });\n\n        return newState;\n      });\n    } else if (!prevItem) {\n      setContent((prevState) => {\n        let newState = prevState.map((item, index) => {\n          if (hoveredSlide.id !== item.id && index > slideItemIndex) {\n            item.transform = transformProps.normal.right;\n            item.origin = \"center center\";\n            return item;\n          } else {\n            item.transform = \"0px\";\n            item.origin = \"left center\";\n\n            return item;\n          }\n        });\n\n        return newState;\n      });\n    } else if (!nextItem) {\n      setContent((prevState) => {\n        let newState = prevState.map((item, index) => {\n          if (hoveredSlide.id !== item.id && index < slideItemIndex) {\n            item.transform = transformProps.normal.left;\n            item.origin = \"center center\";\n            return item;\n          } else {\n            item.transform = \"0px\";\n            item.origin = \"center right \";\n            return item;\n          }\n        });\n\n        return newState;\n      });\n    }\n  };\n\n  const isOnScreen = (slide) => {\n    if (slide && slide.className.split(\" \").includes(\"onScreen\")) {\n      return true;\n    }\n\n    return false;\n  };\n\n  const resetSize = (e) => {\n    setContent((prevState) => {\n      let newState = prevState.map((item, index) => {\n        item.transform = \"0px\";\n        return item;\n      });\n\n      return newState;\n    });\n  };\n\n  return {\n    moveSection,\n    selectSlide,\n    closeInformationWindow,\n    hasPrev,\n    hasNext,\n    scaleTiles,\n    resetSize,\n    sliderIndex,\n    sliderPages,\n    slideProps,\n    content,\n    currentSlide,\n    paginationIndicator,\n  };\n};\n\nexport default useSlider;\n"]},"metadata":{},"sourceType":"module"}