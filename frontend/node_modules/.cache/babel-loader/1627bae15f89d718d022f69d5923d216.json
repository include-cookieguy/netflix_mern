{"ast":null,"code":"import _regeneratorRuntime from\"/home/thangnq/Code/netflix_mern/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/thangnq/Code/netflix_mern/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/thangnq/Code/netflix_mern/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// import axios from \"axios\";\nimport React from\"react\";import{useState,useEffect}from\"react\";import Featured from\"../../components/featured/Featured\";import Footer from\"../../components/footer/Footer\";import Slider from\"../../components/slider/Slider\";import Navbar from\"../../components/navbar/Navbar\";import{getDataAPI}from\"../../utils/fetchData\";import\"./home.scss\";// import jwt_decode from \"jwt-decode\";\nimport{useSelector}from\"react-redux\";import SearchList from\"../../components/search-list/SearchList\";import{useLocation}from\"react-router\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Home=function Home(_ref){var type=_ref.type;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),lists=_useState2[0],setLists=_useState2[1];var _useSelector=useSelector(function(state){return state;}),auth=_useSelector.auth,genre=_useSelector.genre,search=_useSelector.search,user=_useSelector.user;var location=useLocation();// const axiosJWT = axios.create();\n// axiosJWT.interceptors.request.use(\n//   async (config) => {\n//     let currentDate = new Date();\n//     const decodedToken = jwt_decode(localStorage.getItem('access_token'));\n//     console.log(decodedToken);\n//     if (decodedToken.exp * 1000 < currentDate.getTime()) {\n//       const data = await refreshToken();\n//       config.headers['authorization'] = 'Bearer ' + data.access_token;\n//       localStorage.setItem('access_token', data.access_token);\n//     }\n//     console.log(config);\n//     return config;\n//   },\n//   (error) => {\n//     return Promise.reject(error);\n//   }\n// );\nuseEffect(function(){var getRandomLists=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getDataAPI(\"lists\".concat(type?\"?type=\"+type:\"\").concat(type&&genre?\"&genre=\"+genre:\"\"),auth.token);case 3:res=_context.sent;setLists(res.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function getRandomLists(){return _ref2.apply(this,arguments);};}();getRandomLists();},[type,auth.token,genre]);// const refreshToken = async () => {\n//   try {\n//     const res = await postDataAPI('refresh_token');\n//     dispatch({\n//       type: GLOBALTYPES.AUTH,\n//       payload: {\n//         token: res.data.access_token,\n//         user: res.data.user,\n//       },\n//     });\n//     return res.data;\n//   } catch (err) {\n//     console.log(err);\n//   }\n// };\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"home\",children:[/*#__PURE__*/_jsx(Navbar,{}),!search.searchInput?/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(Featured,{type:type,listRandom:lists}),/*#__PURE__*/_jsxs(\"div\",{className:\"top-5\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Top 5 in Vietnam Today\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://occ-0-395-58.1.nflxso.net/dnm/api/v6/Da_vleYcahiCE7JMYt8LJRyoenc/AAAABYUNVCsbNhWFLDh6trh4IddkaG98S6wf5OudTc01J8NRUSrXe-WKiqS7KWtXGWhtowD4G5HtOH676YBYyUjmgaeXgvVcl9TSJLM5nec7Dq3VrQFj1ppQZyKDbzqPvw.webp?r=dae\",alt:\"top\"}),/*#__PURE__*/_jsx(\"div\",{children:\"1\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"//image.tmdb.org/t/p/w220_and_h330_face/6tfT03sGp9k4c0J3dypjrI8TSAI.jpg\",alt:\"top\"}),/*#__PURE__*/_jsx(\"div\",{children:\"2\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://occ-0-395-58.1.nflxso.net/dnm/api/v6/Da_vleYcahiCE7JMYt8LJRyoenc/AAAABQyMo9FexoaHUz1nw8fetcYXqz-0mI6Dkncw6v8CsuEz3lacTX1KWVaH-VzowXW1ez5PPKS1BmEVX45X9ss0ZzQ_b-HkZQ8ajoxJC4-k6zt_BCZMkclNdspEq6v9bOS8rlYzqrxKUBof-2m9CzZZj7tobaitpYJunArSQIfz_N9ECHG089PO9iVsmis6HAfRYctycqGJ0HAj_Vwt54Gax9GbqwjQqd-5cNGxE1H1d2_O4QgiU2hrBCq39qcTr2LjncKV8lVQio4_uAMuiYg7kCIqUvpZ6K322oqCrVOkxbYmxOOLR6w-jL8cMWgYp1WezhHulAglPVlE_KfwCNdHoO5g3YFKBpzPwGKBFQqW8oDeKO-VWY4u9wUNJ6GdiJfu2GrGBevMixCTUT4v9udIkvOOVdbWgE7j6Nhl7qg97X0.webp?r=ded\",alt:\"top\"}),/*#__PURE__*/_jsx(\"div\",{children:\"3\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"//image.tmdb.org/t/p/w220_and_h330_face/wGFUewXPeMErCe2xnCmmLEiHOGh.jpg\",alt:\"top\"}),/*#__PURE__*/_jsx(\"div\",{children:\"4\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"//image.tmdb.org/t/p/w220_and_h330_face/4EYPN5mVIhKLfxGruy7Dy41dTVn.jpg\",alt:\"top\"}),/*#__PURE__*/_jsx(\"div\",{children:\"5\"})]})]})]}),user.watchAgain.length>0&&location.pathname===\"/\"&&/*#__PURE__*/_jsx(Slider,{mainTitle:\"Continue Watching for \".concat(auth.user.username),data:user.watchAgain,poster:false,watchAgain:true}),user.favouriteMovie.length>0&&/*#__PURE__*/_jsx(Slider,{mainTitle:\"\".concat(auth.user.username,\"'s List\"),data:user.favouriteMovie,poster:true}),lists.map(function(list,index){return/*#__PURE__*/_jsx(Slider,{mainTitle:list.title,data:list.result,poster:false},index);})]}):/*#__PURE__*/_jsx(SearchList,{}),/*#__PURE__*/_jsx(Footer,{})]});};export default Home;","map":{"version":3,"sources":["/home/thangnq/Code/netflix_mern/frontend/src/pages/home/Home.js"],"names":["React","useState","useEffect","Featured","Footer","Slider","Navbar","getDataAPI","useSelector","SearchList","useLocation","Home","type","lists","setLists","state","auth","genre","search","user","location","getRandomLists","token","res","data","console","log","searchInput","watchAgain","length","pathname","username","favouriteMovie","map","list","index","title","result"],"mappings":"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","sourcesContent":["// import axios from \"axios\";\nimport React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport Featured from \"../../components/featured/Featured\";\nimport Footer from \"../../components/footer/Footer\";\nimport Slider from \"../../components/slider/Slider\";\nimport Navbar from \"../../components/navbar/Navbar\";\nimport { getDataAPI } from \"../../utils/fetchData\";\nimport \"./home.scss\";\n// import jwt_decode from \"jwt-decode\";\nimport { useSelector } from \"react-redux\";\nimport SearchList from \"../../components/search-list/SearchList\";\nimport { useLocation } from \"react-router\";\n\nconst Home = ({ type }) => {\n  const [lists, setLists] = useState([]);\n  const { auth, genre, search, user } = useSelector((state) => state);\n  const location = useLocation();\n\n  // const axiosJWT = axios.create();\n  // axiosJWT.interceptors.request.use(\n  //   async (config) => {\n  //     let currentDate = new Date();\n  //     const decodedToken = jwt_decode(localStorage.getItem('access_token'));\n  //     console.log(decodedToken);\n  //     if (decodedToken.exp * 1000 < currentDate.getTime()) {\n  //       const data = await refreshToken();\n  //       config.headers['authorization'] = 'Bearer ' + data.access_token;\n  //       localStorage.setItem('access_token', data.access_token);\n  //     }\n\n  //     console.log(config);\n  //     return config;\n  //   },\n  //   (error) => {\n  //     return Promise.reject(error);\n  //   }\n  // );\n\n  useEffect(() => {\n    const getRandomLists = async () => {\n      try {\n        const res = await getDataAPI(\n          `lists${type ? \"?type=\" + type : \"\"}${\n            type && genre ? \"&genre=\" + genre : \"\"\n          }`,\n          auth.token\n        );\n        setLists(res.data);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n    getRandomLists();\n  }, [type, auth.token, genre]);\n\n  // const refreshToken = async () => {\n  //   try {\n  //     const res = await postDataAPI('refresh_token');\n  //     dispatch({\n  //       type: GLOBALTYPES.AUTH,\n  //       payload: {\n  //         token: res.data.access_token,\n  //         user: res.data.user,\n  //       },\n  //     });\n  //     return res.data;\n  //   } catch (err) {\n  //     console.log(err);\n  //   }\n  // };\n\n  return (\n    <div className=\"home\">\n      <Navbar />\n      {!search.searchInput ? (\n        <React.Fragment>\n          <Featured type={type} listRandom={lists} />\n          <div className=\"top-5\">\n            <h1>Top 5 in Vietnam Today</h1>\n            <div className=\"wrapper\">\n              <div className=\"item\">\n                <img\n                  src=\"https://occ-0-395-58.1.nflxso.net/dnm/api/v6/Da_vleYcahiCE7JMYt8LJRyoenc/AAAABYUNVCsbNhWFLDh6trh4IddkaG98S6wf5OudTc01J8NRUSrXe-WKiqS7KWtXGWhtowD4G5HtOH676YBYyUjmgaeXgvVcl9TSJLM5nec7Dq3VrQFj1ppQZyKDbzqPvw.webp?r=dae\"\n                  alt=\"top\"\n                />\n                <div>1</div>\n              </div>\n              <div className=\"item\">\n                <img\n                  src=\"//image.tmdb.org/t/p/w220_and_h330_face/6tfT03sGp9k4c0J3dypjrI8TSAI.jpg\"\n                  alt=\"top\"\n                />\n                <div>2</div>\n              </div>\n              <div className=\"item\">\n                <img\n                  src=\"https://occ-0-395-58.1.nflxso.net/dnm/api/v6/Da_vleYcahiCE7JMYt8LJRyoenc/AAAABQyMo9FexoaHUz1nw8fetcYXqz-0mI6Dkncw6v8CsuEz3lacTX1KWVaH-VzowXW1ez5PPKS1BmEVX45X9ss0ZzQ_b-HkZQ8ajoxJC4-k6zt_BCZMkclNdspEq6v9bOS8rlYzqrxKUBof-2m9CzZZj7tobaitpYJunArSQIfz_N9ECHG089PO9iVsmis6HAfRYctycqGJ0HAj_Vwt54Gax9GbqwjQqd-5cNGxE1H1d2_O4QgiU2hrBCq39qcTr2LjncKV8lVQio4_uAMuiYg7kCIqUvpZ6K322oqCrVOkxbYmxOOLR6w-jL8cMWgYp1WezhHulAglPVlE_KfwCNdHoO5g3YFKBpzPwGKBFQqW8oDeKO-VWY4u9wUNJ6GdiJfu2GrGBevMixCTUT4v9udIkvOOVdbWgE7j6Nhl7qg97X0.webp?r=ded\"\n                  alt=\"top\"\n                />\n                <div>3</div>\n              </div>\n              <div className=\"item\">\n                <img\n                  src=\"//image.tmdb.org/t/p/w220_and_h330_face/wGFUewXPeMErCe2xnCmmLEiHOGh.jpg\"\n                  alt=\"top\"\n                />\n                <div>4</div>\n              </div>\n              <div className=\"item\">\n                <img\n                  src=\"//image.tmdb.org/t/p/w220_and_h330_face/4EYPN5mVIhKLfxGruy7Dy41dTVn.jpg\"\n                  alt=\"top\"\n                />\n                <div>5</div>\n              </div>\n            </div>\n          </div>\n          {user.watchAgain.length > 0 && location.pathname === \"/\" && (\n            <Slider\n              mainTitle={`Continue Watching for ${auth.user.username}`}\n              data={user.watchAgain}\n              poster={false}\n              watchAgain={true}\n            />\n          )}\n          {user.favouriteMovie.length > 0 && (\n            <Slider\n              mainTitle={`${auth.user.username}'s List`}\n              data={user.favouriteMovie}\n              poster={true}\n            />\n          )}\n          {lists.map((list, index) => (\n            <Slider\n              mainTitle={list.title}\n              data={list.result}\n              poster={false}\n              key={index}\n            />\n          ))}\n        </React.Fragment>\n      ) : (\n        <SearchList />\n      )}\n      <Footer />\n    </div>\n  );\n};\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}