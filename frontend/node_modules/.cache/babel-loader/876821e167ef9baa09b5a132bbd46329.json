{"ast":null,"code":"import _regeneratorRuntime from\"/home/thangnq/Code/netflix_mern/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/thangnq/Code/netflix_mern/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{GLOBALTYPES}from\"./globalTypes\";import{postDataAPI}from\"../../utils/fetchData\";export var login=function login(data){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;dispatch({type:GLOBALTYPES.ALERT,payload:{loading:true}});_context.next=4;return postDataAPI(\"login\",data);case 4:res=_context.sent;setTimeout(function(){dispatch({type:GLOBALTYPES.AUTH,payload:{token:res.data.access_token,user:res.data.user}});localStorage.setItem(\"firstLogin\",true);dispatch({type:GLOBALTYPES.ALERT,payload:{success:res.data.msg}});},1310);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context.t0.response.data.msg}});case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var refreshToken=function refreshToken(){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var firstLogin,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:firstLogin=localStorage.getItem(\"firstLogin\");if(!firstLogin){_context2.next=14;break;}dispatch({type:GLOBALTYPES.ALERT,payload:{loading:true}});_context2.prev=3;_context2.next=6;return postDataAPI(\"refresh_token\");case 6:res=_context2.sent;dispatch({type:GLOBALTYPES.AUTH,payload:{token:res.data.access_token,user:res.data.user}});dispatch({type:GLOBALTYPES.ALERT,payload:{}});_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](3);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context2.t0.response.data.msg}});case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[3,11]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var register=function register(data){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;dispatch({type:GLOBALTYPES.ALERT,payload:{loading:true}});_context3.next=4;return postDataAPI(\"register\",data);case 4:res=_context3.sent;setTimeout(function(){dispatch({type:GLOBALTYPES.AUTH,payload:{token:res.data.access_token,user:res.data.user}});localStorage.setItem(\"firstLogin\",true);dispatch({type:GLOBALTYPES.ALERT,payload:{success:res.data.msg}});},1310);_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](0);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context3.t0.response.data.msg}});case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[0,8]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export var registerEmail=function registerEmail(email){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return postDataAPI(\"registerEmail\",email);case 3:res=_context4.sent;dispatch({type:GLOBALTYPES.ALERT,payload:{success:res.data.msg}});dispatch({type:GLOBALTYPES.STEPBEGIN,payload:res.data.email});_context4.next=11;break;case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](0);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context4.t0.response.data.msg}});case 11:case\"end\":return _context4.stop();}}},_callee4,null,[[0,8]]);}));return function(_x4){return _ref4.apply(this,arguments);};}();};export var logout=function logout(){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;localStorage.removeItem(\"firstLogin\");_context5.next=4;return postDataAPI(\"logout\");case 4:window.location.href=\"/\";_context5.next=10;break;case 7:_context5.prev=7;_context5.t0=_context5[\"catch\"](0);dispatch({type:GLOBALTYPES.ALERT,payload:{error:_context5.t0.response.data.msg}});case 10:case\"end\":return _context5.stop();}}},_callee5,null,[[0,7]]);}));return function(_x5){return _ref5.apply(this,arguments);};}();};","map":{"version":3,"sources":["/home/thangnq/Code/netflix_mern/frontend/src/redux/actions/authAction.js"],"names":["GLOBALTYPES","postDataAPI","login","data","dispatch","type","ALERT","payload","loading","res","setTimeout","AUTH","token","access_token","user","localStorage","setItem","success","msg","error","response","refreshToken","firstLogin","getItem","register","registerEmail","email","STEPBEGIN","logout","removeItem","window","location","href"],"mappings":"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","sourcesContent":["import { GLOBALTYPES } from \"./globalTypes\";\nimport { postDataAPI } from \"../../utils/fetchData\";\n\nexport const login = (data) => async (dispatch) => {\n  try {\n    dispatch({ type: GLOBALTYPES.ALERT, payload: { loading: true } });\n    const res = await postDataAPI(\"login\", data);\n    setTimeout(() => {\n      dispatch({\n        type: GLOBALTYPES.AUTH,\n        payload: {\n          token: res.data.access_token,\n          user: res.data.user,\n        },\n      });\n\n      localStorage.setItem(\"firstLogin\", true);\n\n      dispatch({\n        type: GLOBALTYPES.ALERT,\n        payload: {\n          success: res.data.msg,\n        },\n      });\n    }, 1310);\n  } catch (err) {\n    dispatch({\n      type: GLOBALTYPES.ALERT,\n      payload: {\n        error: err.response.data.msg,\n      },\n    });\n  }\n};\n\nexport const refreshToken = () => async (dispatch) => {\n  const firstLogin = localStorage.getItem(\"firstLogin\");\n  if (firstLogin) {\n    dispatch({ type: GLOBALTYPES.ALERT, payload: { loading: true } });\n\n    try {\n      const res = await postDataAPI(\"refresh_token\");\n      dispatch({\n        type: GLOBALTYPES.AUTH,\n        payload: {\n          token: res.data.access_token,\n          user: res.data.user,\n        },\n      });\n\n      dispatch({ type: GLOBALTYPES.ALERT, payload: {} });\n    } catch (err) {\n      dispatch({\n        type: GLOBALTYPES.ALERT,\n        payload: {\n          error: err.response.data.msg,\n        },\n      });\n    }\n  }\n};\n\nexport const register = (data) => async (dispatch) => {\n  try {\n    dispatch({ type: GLOBALTYPES.ALERT, payload: { loading: true } });\n\n    const res = await postDataAPI(\"register\", data);\n    setTimeout(() => {\n      dispatch({\n        type: GLOBALTYPES.AUTH,\n        payload: {\n          token: res.data.access_token,\n          user: res.data.user,\n        },\n      });\n\n      localStorage.setItem(\"firstLogin\", true);\n      dispatch({\n        type: GLOBALTYPES.ALERT,\n        payload: {\n          success: res.data.msg,\n        },\n      });\n    }, 1310);\n  } catch (err) {\n    dispatch({\n      type: GLOBALTYPES.ALERT,\n      payload: {\n        error: err.response.data.msg,\n      },\n    });\n  }\n};\n\nexport const registerEmail = (email) => async (dispatch) => {\n  try {\n    const res = await postDataAPI(\"registerEmail\", email);\n    dispatch({\n      type: GLOBALTYPES.ALERT,\n      payload: {\n        success: res.data.msg,\n      },\n    });\n\n    dispatch({\n      type: GLOBALTYPES.STEPBEGIN,\n      payload: res.data.email,\n    });\n  } catch (err) {\n    dispatch({\n      type: GLOBALTYPES.ALERT,\n      payload: {\n        error: err.response.data.msg,\n      },\n    });\n  }\n};\n\nexport const logout = () => async (dispatch) => {\n  try {\n    localStorage.removeItem(\"firstLogin\");\n    await postDataAPI(\"logout\");\n    window.location.href = \"/\";\n  } catch (err) {\n    dispatch({\n      type: GLOBALTYPES.ALERT,\n      payload: {\n        error: err.response.data.msg,\n      },\n    });\n  }\n};\n"]},"metadata":{},"sourceType":"module"}